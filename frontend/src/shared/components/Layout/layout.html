<dx-toolbar id="toolbar">
    <dxi-toolbar-item location="before" widget="dxButton" locateInMenu="auto" [options]="burgerOptions">
    </dxi-toolbar-item>
    <dxi-toolbar-item location="center" widget="dxButton" locateInMenu="never">
        <div *dxTemplate>
            <div class="toolbar-label"><b>Ticket Management System</b></div>
        </div>
    </dxi-toolbar-item>
</dx-toolbar>
<dx-drawer template="sidebar" [(opened)]="isOpen" [maxSize]="256" [shading]="false" openedStateMode="shrink"
    revealMode="slide" position="left" class="flex-1 min-h-0">
    <div class="h-full flex justify-center">
        <router-outlet></router-outlet>
    </div>

    <div *dxTemplate="let data of 'sidebar'" class="h-full bg-gray-900 text-white flex flex-col">
        <dx-list [dataSource]="menuItems" [hoverStateEnabled]="true" [activeStateEnabled]="false"
            [focusStateEnabled]="false" (onItemClick)="onItemClick($event)" width="256px">
            <div *dxTemplate="let item of 'item'" class="w-full h-full">
                <li class="flex items-center" [routerLink]="item.path" routerLinkActive="active"
                    [routerLinkActiveOptions]="{exact: item.path === ''}">
                    <i [class]="item.icon + ' text-xl'" [class.mr-3]="isOpen"></i>
                    <span *ngIf="isOpen" class="text-sm font-medium">{{ item.text }}</span>
                </li>
            </div>
        </dx-list>

        <div class="p-4 border-t border-gray-800" *ngIf="currentUser">
            <dx-drop-down-button [items]="userMenuItems" displayExpr="text" keyExpr="id" stylingMode="text"
                [showArrowIcon]="false" template="userProfile" (onItemClick)="onUserMenuItemClick($event)">
                <div *dxTemplate="let data of 'userProfile'">
                    <div class="flex items-center gap-3">
                        <img *ngIf="currentUser.avatarUrl && currentUser.avatarUrl !== 'NA'; else initials"
                            class="h-8 w-8 rounded-full object-cover flex-shrink-0" [src]="currentUser.avatarUrl"
                            alt="avatar">
                        <ng-template #initials>
                            <div
                                class="h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0 text-xs font-bold text-white">
                                {{ currentUser.name.charAt(0).toUpperCase() }}
                            </div>
                        </ng-template>
                        <div class="min-w-0 overflow-hidden text-left">
                            <p class="text-sm font-medium text-white truncate">{{ currentUser.name }}</p>
                            <p class="text-xs text-gray-400 truncate">{{ currentUser.role }}</p>
                        </div>
                    </div>
                </div>
            </dx-drop-down-button>
        </div>
    </div>
</dx-drawer>